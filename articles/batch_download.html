<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Batch download files • ripeds</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Batch download files">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ripeds</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/batch_download.html">Batch download files</a>
    </li>
    <li>
      <a href="../articles/introduction.html">Introduction</a>
    </li>
    <li>
      <a href="../articles/workflow.html">Workflow</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/nehgov/ripeds/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Batch download files</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/nehgov/ripeds/blob/main/vignettes/articles/batch_download.Rmd" class="external-link"><code>vignettes/articles/batch_download.Rmd</code></a></small>
      <div class="hidden name"><code>batch_download.Rmd</code></div>

    </div>

    
    
<p>Depending on your analysis, you may wish to download a number of data
files to your hard disk. This can save time when working on large scale
projects. In addition, downloading and saving the raw data files used in
your analysis can support future reproduction. Should files on the
server be revised or modified, you will have a copy of the files as they
existed at the time of your original analysis.</p>
<p>You can also download the dictionary files that accompany each
complete data file. While <code>iped_dict()</code> provides useful
information, the full data files may contain more detailed definitions
and distributional information (<em>e.g.</em>, frequencies, means,
<em>etc.</em>).</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://potential-adventure-6knn6m6.pages.github.io/" class="external-link">ripeds</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="ipeds_download_to_disk">
<code>ipeds_download_to_disk()</code><a class="anchor" aria-label="anchor" href="#ipeds_download_to_disk"></a>
</h2>
<p>To download either complete data files or the accompanying dictionary
files, use the <code><a href="../reference/ipeds_download_to_disk.html">ipeds_download_to_disk()</a></code> function.</p>
<p>There are two basic ways to download the files:</p>
<ol style="list-style-type: decimal">
<li>Using file names directly;</li>
<li>Using results from the helper function
<code><a href="../reference/ipeds_file_table.html">ipeds_file_table()</a></code>
</li>
</ol>
<div class="section level3">
<h3 id="using-file-names">Using file names<a class="anchor" aria-label="anchor" href="#using-file-names"></a>
</h3>
<p>If you know the file names you need, you can use them directly. Be
sure to give a local directory for the download. If the directory
doesn’t exist, R will try to create it, unless you set
<code>create_dir = FALSE</code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## single file to current working directory</span></span>
<span><span class="fu"><a href="../reference/ipeds_download_to_disk.html">ipeds_download_to_disk</a></span><span class="op">(</span>to_dir <span class="op">=</span> <span class="st">"."</span>, files <span class="op">=</span> <span class="st">"IC2022"</span><span class="op">)</span></span></code></pre></div>
<p>Note that you do not need to specify the file ending, only the file
stub name. Whichever files you choose, you will end up with a zip file
(&lt;file_stub_name.zip&gt;: <code>IC2022.zip</code>) that contains:</p>
<ol style="list-style-type: decimal">
<li>The CSV file (typically lowercase): <code>ic2022.csv</code>
</li>
<li>A revised version of the file, if one exists, ending in
<code>*_rv</code>: <code>ic2022_rv.csv</code>
</li>
</ol>
<p>You can pass an object with vector of names.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## multiple files stored in object</span></span>
<span><span class="va">files_to_get</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"IC2020"</span>, <span class="st">"IC2021"</span>, <span class="st">"IC2022"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/ipeds_download_to_disk.html">ipeds_download_to_disk</a></span><span class="op">(</span>to_dir <span class="op">=</span> <span class="st">"."</span>, files <span class="op">=</span> <span class="va">files_to_get</span><span class="op">)</span></span></code></pre></div>
<p>The zipped version of each of these files will be downloaded to the
<code>to_dir</code>.</p>
</div>
<div class="section level3">
<h3 id="using-results-from-helper-function-ipeds_file_table">Using results from helper function
<code>ipeds_file_table()</code><a class="anchor" aria-label="anchor" href="#using-results-from-helper-function-ipeds_file_table"></a>
</h3>
<p>If you don’t know the specific file names or simply want to download
a larger number of files without listing them all, you can use results
from <code><a href="../reference/ipeds_file_table.html">ipeds_file_table()</a></code>.</p>
<p>For example, if you want to download all files associated with 2020,
you can filter the results of <code><a href="../reference/ipeds_file_table.html">ipeds_file_table()</a></code> to that
year:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## save results from ipeds_file_table() to object</span></span>
<span><span class="va">dict</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ipeds_file_table.html">ipeds_file_table</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## pull all files from 2020</span></span>
<span><span class="fu"><a href="../reference/ipeds_download_to_disk.html">ipeds_download_to_disk</a></span><span class="op">(</span><span class="st">"."</span>, use_ipeds_dict <span class="op">=</span> <span class="va">dict</span><span class="op">[</span><span class="va">dict</span><span class="op">$</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2020</span>,<span class="op">]</span><span class="op">)</span></span></code></pre></div>
<p>Note that for files with academic year naming conventions
(<em>e.g.</em>, 9899), the fall semester is the year associated with the
file: 2020 will select 20-21 files.</p>
<p>You can also filter on other values. Broadly, IPEDS survey components
fall into a few categories. You can filter to return all
<strong>Institutional Characteristics</strong> survey files:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## download all surveys under the Institutional Characteristics category</span></span>
<span><span class="fu"><a href="../reference/ipeds_download_to_disk.html">ipeds_download_to_disk</a></span><span class="op">(</span><span class="st">"."</span>, use_ipeds_dict <span class="op">=</span> <span class="va">dict</span><span class="op">[</span><span class="va">dict</span><span class="op">$</span><span class="va">survey</span> <span class="op">==</span> <span class="st">"Institutional Characteristics"</span>,<span class="op">]</span><span class="op">)</span></span></code></pre></div>
<p>You can filter by key words in the survey titles. For example, if you
want to save all files related to directory information:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## download using regular expressions to grab files with "Directory" in title</span></span>
<span><span class="fu"><a href="../reference/ipeds_download_to_disk.html">ipeds_download_to_disk</a></span><span class="op">(</span><span class="st">"."</span>, use_ipeds_dict <span class="op">=</span> <span class="va">dict</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"Directory"</span>, <span class="va">dict</span><span class="op">$</span><span class="va">title</span><span class="op">)</span>,<span class="op">]</span><span class="op">)</span></span></code></pre></div>
<p>Finally, you can download the entirety of IPEDS if you use
<code><a href="../reference/ipeds_file_table.html">ipeds_file_table()</a></code> with no filter:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## download all files</span></span>
<span><span class="fu"><a href="../reference/ipeds_download_to_disk.html">ipeds_download_to_disk</a></span><span class="op">(</span><span class="st">"."</span>, use_ipeds_dict <span class="op">=</span> <span class="va">dict</span><span class="op">)</span></span></code></pre></div>
<p>Note, however, that IPEDS is very large. It both will take a while to
download and take up substantial disk space (&gt; 1GB as of January
2025).</p>
</div>
</div>
<div class="section level2">
<h2 id="dictionary-files">Dictionary files<a class="anchor" aria-label="anchor" href="#dictionary-files"></a>
</h2>
<p>Download accompanying dictionary files by setting
<code>type = "dictionary"</code>:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## get dictionary file</span></span>
<span><span class="fu"><a href="../reference/ipeds_download_to_disk.html">ipeds_download_to_disk</a></span><span class="op">(</span><span class="st">"."</span>, <span class="st">"IC2020"</span>, type <span class="op">=</span> <span class="st">"dictionary"</span><span class="op">)</span></span></code></pre></div>
<p>These files will be named using the stub name plus
<code>*_Dict</code> ending and also stored inside a zip directory:
<em>e.g.</em>, <code>IC2020_Dict.zip</code>.</p>
</div>
<div class="section level2">
<h2 id="overwrite">Overwrite<a class="anchor" aria-label="anchor" href="#overwrite"></a>
</h2>
<p>By default, <code><a href="../reference/ipeds_download_to_disk.html">ipeds_download_to_disk()</a></code> won’t overwrite
existing files. This is to save time and bandwidth. If you wish to
download all input files, set <code>overwrite = TRUE</code>:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## overwrite</span></span>
<span><span class="va">files_to_get</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"IC2020"</span>, <span class="st">"IC2021"</span>, <span class="st">"IC2022"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/ipeds_download_to_disk.html">ipeds_download_to_disk</a></span><span class="op">(</span>to_dir <span class="op">=</span> <span class="st">"."</span>, files <span class="op">=</span> <span class="va">files_to_get</span>, overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Benjamin Skinner.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer>
</div>






  </body>
</html>
